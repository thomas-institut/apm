<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../../../fonts/fontawesome-free-5.10.1-web/css/all.css">
    <link rel="stylesheet" type="text/css" href="../../../node_modules/bootstrap/dist/css/bootstrap.css"/>
    <script type="text/javascript" src="../../../node_modules/jquery/dist/jquery.js"></script>
    <script type="text/javascript" src="../../../node_modules/bootstrap/dist/js/bootstrap.js"></script>
    <script type="text/javascript" src="../../../js/OptionsChecker.js"></script>
    <script type="text/javascript" src="../../../js/widgets/EditableTextField.js"></script>
    <title>Editable text field</title>

    <script>
      $(function() {

        function genConfirmLog(id) {
          return function(data) {
            if (data.detail.newText === data.detail.oldText) {
              $('#log').append("<p>" + id + ": confirm with no change : " + data.detail.newText)
            } else {
              $('#log').append("<p>" + id + ": confirm with new text : " + data.detail.newText)
            }
          }

        }

        let field1 = new EditableTextField({
          containerSelector: '#theSpan',
          initialText: 'span',
          onConfirm: genConfirmLog('span'),
          onEditInputChange: function (data) {
            let textInEditor = data.detail.textInEditor
            $('#log').append("<p>span: edit change '" + textInEditor + '\'</p>' )

          }

        })
        let field2 = new EditableTextField({containerSelector: '#theP', initialText: 'This is another one', onConfirm: genConfirmLog('theP')})

        $('#reset').on('click', function() {
          field1.setText("span")
        })
      })
    </script>

    <style>
        .etf-hover {
            background: #00FFFF;
        }

        .etf-normal {
            background: #5bc0de;
        }

        .etf-editing {
            background: #abdde5;
        }

        #log {
            font-family: monospace;
        }
    </style>
</head>
<body>
<h1>Editable Text Field</h1>

<p>This is an editable <span id="theSpan"></span> <button id="reset">Reset Text</button> </p>
<p id="theP"></p>
<h2>Log</h2>
<div id="log"></div>
</body>
</html>